#!/usr/bin/env python3
import os
import sys

SCRIPT_DIR = os.path.dirname(os.path.abspath(__file__))
REPO_ROOT = os.path.dirname(SCRIPT_DIR)
sys.path.insert(0, REPO_ROOT)

from common import ensure_threads_file_exists, load_threads_lines, get_open_thread_indices  # type: ignore


def main():
    lines = load_threads_lines()
    open_indices = get_open_thread_indices(lines)

    if not open_indices:
        print("No open threads.")
        return

    print("Open threads:")
    for idx, line_idx in enumerate(open_indices, start=1):
        line = lines[line_idx].strip()
        # Strip markdown checkbox
        if line.startswith("- [ ]"):
            line = line[5:].strip()
        print(f"{idx}. {line}")


if __name__ == "__main__":
    main()
